
<!-- README.md is generated from README.Rmd. Please edit that file -->

# Fomir

<!-- badges: start -->

<!-- badges: end -->

Forest operation models in R

The goal of Fomir is to provide functions for estimating time
consumption, costs, and other inputs in forest operations. Unless
otherwise specified, all functions take a data.frame as argument and
assume each row is one treatment unit, normally one forest stand.
Reference literature for all functions is provided in the “inst/extdata”
direcotry of the package.  
For the moment there are functions for

  - Harvesting: time consumption per per stem, per m^3, per ha
  - Forwarding: time consumption per m3 & per ha

## Installation

Installation of `Fomir` from github:

``` r
devtools::install_github("hbelbo/Fomir")
```

Load Fomir and dependent packages:

``` r
invisible( lapply( c("magrittr", "dplyr", "Fomir"), library, character.only = T))
```

## Harvesting and forwarding operations

Time consumption models for harvester and forwarder are based on
Brunberg’s time consumption models, found in the Heureka documentation
<https://www.heurekaslu.se/w/images/8/8c/Time_consumption_harvester_and_forwarder.pdf>
A Norwegian counterpart / adaption is found at Skogkurs
<https://www.skogkurs.no/kunnskapsskogen/artikkel.cfm?Id_art=3269>

### stands data and variables

Stand characteristics like mean stem volume, slope, species composition
etc must follow the naming conventions used in the Heureka documentation
below.  
NB: Reasonable default values for all variables except mean stem size
and harvested trees per ha are provided within the functions.

<img src="man/figures/Stand_Variables_p1.png" />
<img src="man/figures/Stand_Variables_p2.png" />

``` r
library(Fomir)

## example of data frame of stands to be clearcuted

heureka_testdata_clearcutting %>% dplyr::glimpse()
#> Observations: 4
#> Variables: 6
#> $ v           <dbl> 0.8, 0.4, 1.5, 0.7
#> $ Nharv       <dbl> 500, 600, 700, 500
#> $ Y           <dbl> 1, 1, 1, 2
#> $ L           <dbl> 1, 1, 2, 2
#> $ treatment   <chr> "clearcutting", "clearcutting", "clearcutting", "clearc...
#> $ solution_hr <dbl> 9.0519, 7.5400, 20.6850, 8.5607
```

``` r
## t_harv()
t_harv(stands_df = testdf_volume) %>% dplyr::glimpse()
#> Observations: 200
#> Variables: 23
#> $ harv_G15min.tree  <dbl> 0.4651746, 0.4859712, 0.5067721, 0.5275772, 0.548...
#> $ harv_G15min.ha    <dbl> 465.1746, 485.9712, 506.7721, 527.5772, 548.3868,...
#> $ harv_G15h.ha      <dbl> 7.753, 8.100, 8.446, 8.793, 9.140, 9.487, 9.834, ...
#> $ harv_G15min.m3    <dbl> 9.303, 8.093, 7.229, 6.582, 6.080, 5.678, 5.349, ...
#> $ harv_m3.G15h      <dbl> 6.450, 7.414, 8.300, 9.116, 9.868, 10.567, 11.217...
#> $ t1                <dbl> 4.46617, 4.46617, 4.46617, 4.46617, 4.46617, 4.46...
#> $ t2                <dbl> 29.71649, 31.31623, 32.91630, 34.51669, 36.11743,...
#> $ t3                <dbl> 1.6, 1.6, 1.6, 1.6, 1.6, 1.6, 1.6, 1.6, 1.6, 1.6,...
#> $ v                 <dbl> 0.05000000, 0.06005025, 0.07010050, 0.08015075, 0...
#> $ Nharv             <dbl> 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1...
#> $ Nres              <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
#> $ Y                 <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2...
#> $ L                 <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2...
#> $ D                 <dbl> 700, 700, 700, 700, 700, 700, 700, 700, 700, 700,...
#> $ treatment         <chr> "clearcutting", "clearcutting", "clearcutting", "...
#> $ thinningsystem    <chr> "striproad", "striproad", "striproad", "striproad...
#> $ thinningnumber    <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1...
#> $ rd                <dbl> 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9,...
#> $ p_init_spruce     <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1...
#> $ Pharv_broadLeaves <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
#> $ W                 <dbl> 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 1...
#> $ Vharv             <dbl> 50.00000, 60.05025, 70.10050, 80.15075, 90.20101,...
#> $ modelversion      <chr> "Talbot16", "Talbot16", "Talbot16", "Talbot16", "...

## t_forw()
t_forw(stands_df = testdf_volume) %>% dplyr::glimpse()
#> Observations: 200
#> Variables: 16
#> $ forw_size      <chr> "large", "large", "large", "large", "large", "large"...
#> $ forw_G15min.ha <dbl> 287.4144, 331.6609, 373.3278, 415.5986, 457.1004, 49...
#> $ forw_G15min.m3 <dbl> 5.748288, 5.523056, 5.325609, 5.185211, 5.067575, 4....
#> $ forw_G15h.ha   <dbl> 4.79, 5.53, 6.22, 6.93, 7.62, 8.27, 8.94, 9.58, 10.2...
#> $ forw_m3.G15h   <dbl> 10.43789, 10.86355, 11.26632, 11.57137, 11.83998, 12...
#> $ t_forw.m3      <dbl> 5.658288, 5.423140, 5.240017, 5.091637, 4.967798, 4....
#> $ v              <dbl> 0.05000000, 0.06005025, 0.07010050, 0.08015075, 0.09...
#> $ Nharv          <dbl> 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000...
#> $ Nres           <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
#> $ Y              <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2...
#> $ L              <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2...
#> $ D              <dbl> 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 70...
#> $ nbAssortments  <dbl> 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4...
#> $ treatment      <chr> "clearcutting", "clearcutting", "clearcutting", "cle...
#> $ Vharv          <dbl> 50.00000, 60.05025, 70.10050, 80.15075, 90.20101, 10...
#> $ modelversion   <chr> "Talbot16", "Talbot16", "Talbot16", "Talbot16", "Tal...

## harv_forw
harv_forw(stands_df = testdf_volume) %>% dplyr::glimpse()
#> Joining, by = c("v", "Nharv", "Nres", "Y", "L", "D", "treatment", "Vharv", "modelversion")
#> Observations: 200
#> Variables: 30
#> $ harv_G15min.tree  <dbl> 0.4651746, 0.4859712, 0.5067721, 0.5275772, 0.548...
#> $ harv_G15min.ha    <dbl> 465.1746, 485.9712, 506.7721, 527.5772, 548.3868,...
#> $ harv_G15h.ha      <dbl> 7.753, 8.100, 8.446, 8.793, 9.140, 9.487, 9.834, ...
#> $ harv_G15min.m3    <dbl> 9.303, 8.093, 7.229, 6.582, 6.080, 5.678, 5.349, ...
#> $ harv_m3.G15h      <dbl> 6.450, 7.414, 8.300, 9.116, 9.868, 10.567, 11.217...
#> $ forw_size         <chr> "large", "large", "large", "large", "large", "lar...
#> $ forw_G15min.ha    <dbl> 287.4144, 331.6609, 373.3278, 415.5986, 457.1004,...
#> $ forw_G15min.m3    <dbl> 5.748288, 5.523056, 5.325609, 5.185211, 5.067575,...
#> $ forw_G15h.ha      <dbl> 4.79, 5.53, 6.22, 6.93, 7.62, 8.27, 8.94, 9.58, 1...
#> $ forw_m3.G15h      <dbl> 10.43789, 10.86355, 11.26632, 11.57137, 11.83998,...
#> $ t1                <dbl> 4.46617, 4.46617, 4.46617, 4.46617, 4.46617, 4.46...
#> $ t2                <dbl> 29.71649, 31.31623, 32.91630, 34.51669, 36.11743,...
#> $ t3                <dbl> 1.6, 1.6, 1.6, 1.6, 1.6, 1.6, 1.6, 1.6, 1.6, 1.6,...
#> $ v                 <dbl> 0.05000000, 0.06005025, 0.07010050, 0.08015075, 0...
#> $ Nharv             <dbl> 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1...
#> $ Nres              <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
#> $ Y                 <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2...
#> $ L                 <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2...
#> $ D                 <dbl> 700, 700, 700, 700, 700, 700, 700, 700, 700, 700,...
#> $ treatment         <chr> "clearcutting", "clearcutting", "clearcutting", "...
#> $ thinningsystem    <chr> "striproad", "striproad", "striproad", "striproad...
#> $ thinningnumber    <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1...
#> $ rd                <dbl> 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9,...
#> $ p_init_spruce     <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1...
#> $ Pharv_broadLeaves <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
#> $ W                 <dbl> 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 1...
#> $ Vharv             <dbl> 50.00000, 60.05025, 70.10050, 80.15075, 90.20101,...
#> $ modelversion      <chr> "Talbot16", "Talbot16", "Talbot16", "Talbot16", "...
#> $ t_forw.m3         <dbl> 5.658288, 5.423140, 5.240017, 5.091637, 4.967798,...
#> $ nbAssortments     <dbl> 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4...
```
